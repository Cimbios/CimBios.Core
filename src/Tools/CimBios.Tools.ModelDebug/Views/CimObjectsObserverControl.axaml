<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="using:CimBios.Tools.ModelDebug.ViewModels"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="CimBios.Tools.ModelDebug.Views.CimObjectsObserverControl"
             x:DataType="vm:CimObjectsObserverViewModel">
  
  <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch"> 
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*" MinHeight="100"/>
    </Grid.RowDefinitions>

    <TextBox  Grid.Row="0"
              Classes="Small, Bordered" 
              Text="{Binding SearchString}" 
              Watermark="Search..." 
              TextAlignment="Start">

      <TextBox.InnerLeftContent>
        <StackPanel Orientation="Horizontal">
          <Button Theme="{DynamicResource BorderlessButton}" 
                  Command="{Binding BackNavigateCommand}"
                  Classes="Small, Secondary">
            <Image Source="/Assets/left.png" Width="16" Height="16"/>
          </Button>
          <Button Theme="{DynamicResource BorderlessButton}" 
                  Command="{Binding ForwardNavigateCommand}"
                  Classes="Small, Secondary">
            <Image Source="/Assets/right.png" Width="16" Height="16"/>
          </Button>
        </StackPanel>
      </TextBox.InnerLeftContent>

      <TextBox.InnerRightContent>
        <Button Theme="{DynamicResource BorderlessButton}" 
                Classes="Small, Secondary"
                Content="🔍"
                Command="{Binding Find}"
                CommandParameter="{Binding SearchString}"/>
      </TextBox.InnerRightContent>
    </TextBox>

    <DockPanel Grid.Row="1" LastChildFill="True">
      <Border BorderThickness="0,0,1,0" BorderBrush="Gray">
        <StackPanel DockPanel.Dock="Left" >
          <Button Theme="{DynamicResource BorderlessButton}" 
                  Command="{Binding LoadModel}">
            <Image Source="/Assets/openfile.png" Width="16" Height="16"/>
          </Button>
          <Button Theme="{DynamicResource BorderlessButton}" 
                  Command="{Binding SaveModel}">
            <Image Source="/Assets/savefile.png" Width="16" Height="16"/>
          </Button>
          <Separator/>
          <Button Content="+" Theme="{DynamicResource BorderlessButton}"
                  Command="{Binding CreateNewObject}">
          </Button>
          <Button Content="-" Theme="{DynamicResource BorderlessButton}"
                  Command="{Binding RemoveSelectedObject}">
          </Button>
          <Separator/>
          <Button Theme="{DynamicResource BorderlessButton}"
                  Command="{Binding CompareWithModel}">
            <Image Source="/Assets/diff.png" Width="16" Height="16"/>
          </Button>
        </StackPanel>
      </Border>
      <TreeDataGrid x:Name="dataGrid" 
                    Grid.Row="1"  
                    Source="{Binding CimObjectsSource}"
                    FontSize="10"
                    CanUserSortColumns="False" 
                    ShowColumnHeaders="False">
        <TreeDataGrid.Styles>
          <Style Selector="TreeDataGridRow:pointerover">
            <Setter Property="Background" Value="#80808080"/>
          </Style>
          <Style Selector="TreeDataGridRow">
            <Setter Property="MinHeight" Value="20"/>
          </Style>
        </TreeDataGrid.Styles>
      </TreeDataGrid>
    </DockPanel>

  </Grid>

</UserControl>
